#!/bin/sh

# Default sed regexp - multiline due to syntax constraints
SED_RULE='/^->/{s:->#\(.*\):/* \1 */:;
        s:^->\([^ ]*\) [\$$#]*\([^ ]*\) \(.*\):#define \1 \2 /* \3 */:;
	s:->::; p;}'

set -e;
echo "#ifndef __ASM_OFFSETS_H__"
echo "#define __ASM_OFFSETS_H__"
echo "/*"
echo " * DO NOT MODIFY."
echo " *"
echo " * This file was auto-generated"
echo " *"
echo " */"
echo ""
sed -ne "${SED_RULE}" $1
echo ""
echo "#endif"
